<wxs module='filters' src='../../filter/filter.wxs' />
<import src="../../wxParse/wxParse.wxml"/>
<view>
  <view class='author'>
    <jImage class='poster' src='{{detail.booklet.base_info.cover_img}}' mode='widthFix'></jImage>
    <view class='content'>
      <view class='xiaoceTitle'>
        <text class='isNew' wx:if='{{detail.booklet.is_new}}'>新品 </text>
        <text class='isVip' wx:if='{{detail.booklet.base_info.can_vip_borrow}}'>VIP </text>
        <text>{{detail.booklet.base_info.title}}</text>
      </view>
      <view class='desc'>{{detail.booklet.base_info.summary}}</view>
      <view class='user' catchtap='toPersonal' data-uid='{{detail.booklet.user_info.user_id}}'>
        <jImage class='avatar' mode='aspectFill' src='{{detail.booklet.user_info.avatar_large}}'></jImage>
        <view class='name'>{{detail.booklet.user_info.user_name}}</view>
      </view>
    </view>
  </view>
  <view class='buy'>
    <image src='/img/ic_xiaoce_bought.png'></image>
    <view class='count'>{{detail.booklet.base_info.buy_count}} 人已加入学习</view>
  </view>
  <view class='heading'>小册内容</view>
  <view class='sections'>
    <view class='section' wx:for='{{detail.sections}}' wx:key='index' data-isfree='{{item.isFree}}' data-section_id='{{item.section_id}}' catchtap='toProbation'>
      <view class='num'>{{index + 1}}</view>
      <view class='info'>
        <view class='title'>{{item.draft_title}}</view>
        <view class='others'>
          <text wx:if='{{item.read_time}}'>学习时长：{{filters.formatDuration(item.read_time)}} {{item.read_count}}次学习</text>
          <text wx:else>写作中...</text>
        </view>
      </view>
      <view class='action'>
        <view wx:if='{{item.is_free}}'>试学</view>
        <image wx:else class='lock' src='/img/ic_xiaoce_lock.png'></image>
      </view>
    </view>
  </view>
  <view class='summary'>
    <template is="wxParse" data="{{wxParseData:article.nodes}}"/>
  </view>
</view>